<?php /* WIDGET FÜR DIE ÜBERSICHT ALLR ONLINE LEKTIONEN */ ?>
<?php /* @todo  Dynamisch aus Datenbank erzeugen (momentan ist es noch zu statisch, siehe Lektionsgruppen) */ ?>

<section>
	<h2>Ablaufplan</h2>
	<table class="table">
		<thead>
			<tr>
				<th>Themenbereich</th>
				<th>online-Lektion</th>
				<?php if($role === 'Student'): ?>
					<th>Zugänglich ab</th>
					<?php /*<th>Status</th>*/ ?>
				<?php elseif($role === 'Teacher'): ?>
					<th>Studierendenzugang</th>
					<?php /*<th>Status für die Studierende</th>*/ ?>
				<?php endif; ?>
				<th>Literatur & Notizen</th>
			</tr>
		</thead>
		<tbody>
		<?php foreach($videos as $video): ?>
			<tr>
				<?php /* THEMENBEREICH */ ?>
				<?php if($video->videoname === 'Griechisch-römische Antike'): ?>
					<td rowspan="3" class="themenbereich">
						<?php echo $video->section .'<br><small>'.$video->author.'</small>'; ?>

					</td>
				<?php endif; ?>
				<?php if($video->videoname === 'Jean-Jacques Rousseau'): ?>
					<td rowspan="3" class="themenbereich">
						<?php echo e($video->section .'<br><small>'.$video->author.' und Prof. Dr. Gabriele Weigand</small>'); ?>


				<?php endif; ?>
				<?php if($video->videoname === 'Erziehung und Unterricht'): ?>
					<td rowspan="2" class="themenbereich">
						<?php echo e($video->section .'<br><small>'.$video->author.'</small>'); ?>


				<?php endif; ?>
				<?php if($video->videoname === 'Wozu ist die Bildung da?'): ?>
					<td rowspan="3" class="themenbereich">
						<?php echo e($video->section .'<br><small>'.$video->author.'</small>'); ?>

					</td>
				<?php endif; ?>

				<?php /* ONLINE-LEKTION */ ?>
				<?php if( Video::available($video->videoname) || $role === 'Teacher' && $video->online): ?>
				<td class="online-lektion">
					<span class="label label-success"><span class="glyphicon glyphicon-eye-open"></span></span>
					<a class="green" href="<?php echo e(route('lektion', [rawurlencode($video->videoname)])); ?>"><?php echo e($video->videoname); ?></a>
				</td>
				<?php else: ?>
				<td class="online-lektion">
					<span class="label label-danger"><span class="glyphicon glyphicon-eye-close"></span></span>
					<a class="red" href="<?php echo e(route('lektion', [rawurlencode($video->videoname)])); ?>"><?php echo e($video->videoname); ?></a>
				</td>
				<?php endif; ?>

				<?php /* ZUGÄNGLICHKEITSDATUM */ ?>
				<td class="seminar-datum"><?php echo e(date('d.m.Y',strtotime($video->available_from))); ?></td>

				<?php /* MATERIALIEN */ ?>
				<td class="materialien">
				  <div class="btn-group">
				  <button class="btn btn-primary btn-xs dropdown-toggle" type="button" data-toggle="dropdown">
					herunterladen <span class="caret"></span>
				  </button>
				  <ul class="dropdown-menu pull-right" role="menu">
					<?php foreach(Video::getPapers($video->videoname) as $paper): ?>

					<li><a class="download-paper" data-name="<?php echo e($paper->papername); ?>" href="<?php echo e(action('DownloadController@getFile', ['type' => 'pdf' , 'file' => str_replace(':','', $paper->papername )])); ?>"><small><?php echo e($paper->author); ?></small><br> <?php echo e($paper->papername); ?> <span class="glyphicon glyphicon-align-justify"></span></a></li>
					<?php endforeach; ?>

					<?php if( Video::available($video->videoname) || $role === 'Teacher' && $video->online): ?>
					<li class="divider"></li>
					<li><a class="download-note" data-name="<?php echo e($video->videoname); ?>" href="<?php echo e(action('LectionController@getNotesPDF', [rawurlencode($video->videoname)])); ?>">Notizen herunterladen <span class="glyphicon glyphicon-pencil"></span></a></li>
					<?php endif; ?>
					<li class="divider"></li>

					<li><a class="download-further-literature" data-name="<?php echo e($video->section); ?>" href="<?php echo e(action('DownloadController@getFile', ['type' => 'pdf' , 'file' => $video->section])); ?>"><small>Weiterführende Literaturhinweise <span class="glyphicon glyphicon-book"></span></small></a></li>

				  </ul>
				  </div>
				</td>
			</tr>
		<?php endforeach; ?>
		</tbody>
	</table>
</section>
